{"ast":null,"code":"import React,{useState}from'react';import\"./Tweetbox.css\";import{Avatar,Button}from\"@mui/material\";import AddPhotoAlternateOutlinedIcon from\"@mui/icons-material/AddPhotoAlternateOutlined\";import axios from\"axios\";import{useUserAuth}from\"../../../context/UserAuthContext\";import useLoggedinuser from\"../../../hooks/useLoggedinuser\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Tweetbox=()=>{var _loggedinsuer$,_loggedinsuer$2;const[post,setpost]=useState(\"\");const[imageurl,setimageurl]=useState(\"\");const[isloading,setisloading]=useState(false);const[name,setname]=useState(\"\");const[username,setusername]=useState(\"\");const{user}=useUserAuth();const[loggedinsuer]=useLoggedinuser();const email=user===null||user===void 0?void 0:user.email;const userprofilepic=(_loggedinsuer$=loggedinsuer[0])!==null&&_loggedinsuer$!==void 0&&_loggedinsuer$.profileImage?loggedinsuer[0].profileImage:user&&user.photoURL;const handleuploadimage=e=>{setisloading(true);const image=e.target.files[0];//console.log(image)\nconst formData=new FormData();formData.set(\"image\",image);axios.post(\"https://api.imgbb.com/1/upload?key=9e63db8a1ef88bd6701fa158975a682e \",formData).then(res=>{setimageurl(res.data.data.display_url);console.log(res.data.data.display_url);setisloading(false);}).catch(e=>{console.log(e);});};const handletweet=e=>{var _user$providerData$;e.preventDefault();if((user===null||user===void 0?void 0:(_user$providerData$=user.providerData[0])===null||_user$providerData$===void 0?void 0:_user$providerData$.providerId)===\"password\"){fetch(`https://twiller-twitterclone-ewhk.onrender.com/loggedinuser?email=${email}`).then(res=>res.json()).then(data=>{var _data$,_data$2;//console.log(data[0].name);\nsetname((_data$=data[0])===null||_data$===void 0?void 0:_data$.name);setusername((_data$2=data[0])===null||_data$2===void 0?void 0:_data$2.username);});}else{setname(user===null||user===void 0?void 0:user.displayName);setusername(email===null||email===void 0?void 0:email.split(\"@\")[0]);}//console.log(name);\nif(name){const userpost={profilephoto:userprofilepic,post:post,photo:imageurl,username:username,name:name,email:email};//console.log(userpost);\nsetpost(\"\");setimageurl(\"\");fetch(\"https://twiller-twitterclone-ewhk.onrender.com/post\",{method:\"POST\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify(userpost)}).then(res=>res.json()).then(data=>{console.log(data);});}};return/*#__PURE__*/_jsx(\"div\",{className:\"tweetBox\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handletweet,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tweetBox__input\",children:[/*#__PURE__*/_jsx(Avatar,{src:(_loggedinsuer$2=loggedinsuer[0])!==null&&_loggedinsuer$2!==void 0&&_loggedinsuer$2.profileImage?loggedinsuer[0].profileImage:user&&user.photoURL}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"What's happening?\",onChange:e=>setpost(e.target.value),value:post,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"imageIcon_tweetButton\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",className:\"imageIcon\",children:isloading?/*#__PURE__*/_jsx(\"p\",{children:\"Uploading Image\"}):/*#__PURE__*/_jsx(\"p\",{children:imageurl?\"Image Uploaded\":/*#__PURE__*/_jsx(AddPhotoAlternateOutlinedIcon,{})})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image\",className:\"imageInput\",onChange:handleuploadimage}),/*#__PURE__*/_jsx(Button,{className:\"tweetBox__tweetButton\",type:\"submit\",children:\"Tweets\"})]})]})});};export default Tweetbox;","map":{"version":3,"names":["React","useState","Avatar","Button","AddPhotoAlternateOutlinedIcon","axios","useUserAuth","useLoggedinuser","jsx","_jsx","jsxs","_jsxs","Tweetbox","_loggedinsuer$","_loggedinsuer$2","post","setpost","imageurl","setimageurl","isloading","setisloading","name","setname","username","setusername","user","loggedinsuer","email","userprofilepic","profileImage","photoURL","handleuploadimage","e","image","target","files","formData","FormData","set","then","res","data","display_url","console","log","catch","handletweet","_user$providerData$","preventDefault","providerData","providerId","fetch","json","_data$","_data$2","displayName","split","userpost","profilephoto","photo","method","headers","body","JSON","stringify","className","children","onSubmit","src","type","placeholder","onChange","value","required","htmlFor","id"],"sources":["C:/Users/Aditya/Desktop/nullclass_practice/twiller-twitterclone/twiller/src/Pages/Feed/Tweetbox/Tweetbox.js"],"sourcesContent":["import React, { useState }  from 'react'\nimport \"./Tweetbox.css\";\nimport { Avatar, Button } from \"@mui/material\";\nimport AddPhotoAlternateOutlinedIcon from \"@mui/icons-material/AddPhotoAlternateOutlined\";\nimport axios from \"axios\";\nimport { useUserAuth } from \"../../../context/UserAuthContext\";\nimport useLoggedinuser from \"../../../hooks/useLoggedinuser\";\n\nconst Tweetbox=()=>{\n    const [post, setpost] = useState(\"\");\n    const [imageurl, setimageurl] = useState(\"\");\n    const [isloading, setisloading] = useState(false);\n    const [name, setname] = useState(\"\");\n    const [username, setusername] = useState(\"\");\n    const { user } = useUserAuth();\n    const [loggedinsuer] = useLoggedinuser();\n    const email = user?.email;\n    const userprofilepic = loggedinsuer[0]?.profileImage\n      ? loggedinsuer[0].profileImage\n      : user && user.photoURL;\n\n      const handleuploadimage = (e) => {\n        setisloading(true);\n        const image = e.target.files[0];\n        //console.log(image)\n        const formData = new FormData();\n        formData.set(\"image\", image);\n        axios.post(\"https://api.imgbb.com/1/upload?key=9e63db8a1ef88bd6701fa158975a682e \", formData)\n        .then((res) => {\n          setimageurl(res.data.data.display_url);\n          console.log(res.data.data.display_url);\n          setisloading(false);\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n      };\n      const handletweet = (e) => {\n        e.preventDefault();\n        if (user?.providerData[0]?.providerId === \"password\") {\n          fetch(`https://twiller-twitterclone-ewhk.onrender.com/loggedinuser?email=${email}`)\n            .then((res) => res.json())\n            .then((data) => {\n              //console.log(data[0].name);\n              setname(data[0]?.name);\n              setusername(data[0]?.username);\n            });\n        } else {\n          setname(user?.displayName);\n          setusername(email?.split(\"@\")[0]);\n        }\n        //console.log(name);\n        if (name) {\n          const userpost = {\n            profilephoto: userprofilepic,\n            post: post,\n            photo: imageurl,\n            username: username,\n            name: name,\n            email: email,\n          };\n          //console.log(userpost);\n          setpost(\"\");\n          setimageurl(\"\");\n          fetch(\"https://twiller-twitterclone-ewhk.onrender.com/post\", {\n            method: \"POST\",\n            headers: {\n              \"content-type\": \"application/json\",\n            },\n            body: JSON.stringify(userpost),\n          })\n            .then((res) => res.json())\n            .then((data) => {\n              console.log(data);\n            });\n        }\n      };\n    return (\n        <div className=\"tweetBox\">\n      <form onSubmit={handletweet}>\n        <div className=\"tweetBox__input\">\n          <Avatar\n            src={\n              loggedinsuer[0]?.profileImage\n                ? loggedinsuer[0].profileImage\n                : user && user.photoURL\n            }\n          />\n          <input\n            type=\"text\"\n            placeholder=\"What's happening?\"\n            onChange={(e) => setpost(e.target.value)}\n            value={post}\n            required\n          />\n          </div>\n        <div className=\"imageIcon_tweetButton\">\n          <label htmlFor=\"image\" className=\"imageIcon\">\n            {\n              isloading ?<p>Uploading Image</p>:<p>{imageurl ? \"Image Uploaded\":<AddPhotoAlternateOutlinedIcon />}</p>\n            }\n          </label>\n          <input\n            type=\"file\"\n            id=\"image\"\n            className=\"imageInput\"\n            onChange={handleuploadimage}\n          />\n          <Button className=\"tweetBox__tweetButton\" type=\"submit\">\n            Tweets\n          </Button>\n        </div>\n      </form>\n    </div>\n    );\n};\nexport default Tweetbox;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}